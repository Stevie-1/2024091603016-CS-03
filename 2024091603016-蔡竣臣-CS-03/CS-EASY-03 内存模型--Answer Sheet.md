#  CS-EASY-03 内存模型--Answer Sheet

1. **什么是“栈溢出”？** 

  答：当栈空间被耗尽时，栈如果再被用于储存，被储存的信息发生溢出，即栈溢出。 

2. **堆区和栈区的区别是什么？**

  |          | 堆区                                                | 栈区                       |
  | -------- | --------------------------------------------------- | -------------------------- |
  | 内存管理 | 由程序员通过`malloc()`，`realloc()`，`free()`等管理 | 由编译器自动管理           |
  | 内存生命 | 程序运行期间一直存在                                | 函数返回时，函数的栈帧销毁 |
  | 内存大小 | 较大，理论上即系统可用内存                          | 较小                       |
  | 访问速度 | 较慢                                                | 较快                       |
  | 内存碎片 | 容易产生                                            | 不会产生                   |
  | 安全性   | 风险高，容易泄露，溢出                              | 相对安全                   |

3. **程序运行过程中，内存模型当中的哪些区是只读的，哪些区是可读写的？**

  只读：程序代码区， 常量区，动态链接库。

  可读写：全局数据区， 堆区， 栈区，动态链接库。

4. **如何使用malloc()、free()函数，它们针对的哪一个区进行操作？** 

    1. malloc() 

    - 语法： ` void* malloc(size_t size);` 
    - 用途：分配一块内存，返回指向该内存的指针，分配失败时返回NULL 
    2. free() 

    - 语法：` void free(void* ptr); `
    - 用途：`free()` 函数用于释放之前通过 `malloc()`、`calloc()` 或 `realloc()` 分配的内存。
    3. 堆区 

5.  **为什么要对程序使用的内存进行管理**？ 
	1. 防止内存泄漏：内存泄漏是指程序在申请内存后，未能在不需要时正确释放，导致这些内存无法被再次使用。随着时间的推移，内存泄漏可能导致可用内存减少，最终耗尽系统资源，导致程序崩溃或系统性能下降。
	2. 避免内存碎片：频繁的内存分配和释放可能导致内存碎片，即内存中存在许多小的、不连续的空闲区域，这些区域太小而无法被有效利用。内存碎片会降低内存使用效率，增加程序的内存使用量，甚至可能导致内存分配失败。
	3. 提高内存使用效率：通过有效的内存管理，可以确保内存资源被合理分配和使用，避免浪费。
	4. 保证程序的稳定性和可靠性：可以减少未初始化的内存等这些风险，提高程序的稳定性和可靠性。
	5. 安全性：内存管理不当可能导致安全漏洞，如缓冲区溢出等。
	6. 跨平台兼容性：不同的操作系统和硬件平台可能有不同的内存管理机制。通过内存管理，可以提高程序的跨平台兼容性。

## 内存模型的应用

| 变量           | 存储区域   | 为什么                                       |
| -------------- | ---------- | -------------------------------------------- |
| `constValue`   | 常量区     | 作用于为所有函数，提高安全性，防止意外修改。 |
| `constString`  | 常量区     | 作用于为所有函数，提高安全性，防止意外修改。 |
| `globalVar`    | 全局数据区 | 作用于为所有函数                             |
| `staticVar`    | 全局数据区 |                                              |
| `localVar`     | 栈区       |                                              |
| `ptr`          | 栈区       |                                              |
| `localVarMain` | 栈区       |                                              |



## 浅谈Cache 

1. **什么是冯诺伊曼体系结构？什么是现代计算机的组织结构？这两者的不同点在哪里？**
	1. 冯诺伊曼体系结构是冯诺依曼提出的计算机组织和设计的概念模型。内容如下： 


```text
- 采用二进制 
- 程序存储执行：指令和数据不加区别混合存储在同一个存储器中，程序或指令的顺序执行，即预先编好程序，然后交给计算机按照程序中预先定义好的顺序进行数值计算。
- 计算机由五个部分组成（运算器、控制器、存储器、输入设备、输出设备）
```

​	  2. 现代计算机的结构包括以下几个主要组成部分：

```text
中央处理器：CPU是计算机的核心，负责执行指令和控制计算机的运行。它包括算术逻辑单元、控制单元和寄存器等部件，用于进行数据运算和控制流程。
存储器：用于存储数据、指令和程序。主要包括随机存取存储器和只读存储器。RAM是临时存储器，用于存储正在执行的程序和数据；而ROM是永久存储器，用于存储固定的程序和数据。
输入/输出设备：用于与外部环境交互，实现数据的输入和输出。 常见的输入设备包括键盘、鼠标、触摸屏等；常见的输出设备包括显示器、打印机、音频设备等。
总线系统：总线是不同组件之间传输数据、指令和控制信号的通道。 它分为数据总线、地址总线和控制总线。数据总线用于传输数据，地址总线用于指定数据在存储器中的位置，控制总线用于传输控制信号。 
存储器层次结构：现代计算机通常采用存储器层次结构，包括寄存器、高速缓存、主存储器和辅助存储器等不同级别的存储设备。 这种层次结构可以在速度、容量和成本之间做出平衡，提高计算机的性能和效率。
指令集架构：ISA定义了计算机的指令集和编程模型。它规定了CPU支持的操作、寄存器的使用方式等，决定了软件与硬件之间的接口。常见的ISA包括x86、ARM等。
并行处理和多核技术：现代计算机采用并行处理和多核技术，将多个处理器核心集成到一个芯片中，实现同一时间处理多个任务或同时执行多条指令。
```

​	 3. 区别如下：

```text
处理方式：冯·诺依曼体系结构是顺序执行指令，而现代计算机倾向于并行处理。

存储器访问：冯·诺依曼体系结构中，指令和数据存储在同一存储器中，而现代计算机可能采用哈佛结构，将指令和数据存储在不同的存储器中。

控制器：冯·诺依曼体系结构中，控制器是单一的，而现代计算机可能采用分布式控制。

性能提升：现代计算机通过使用更先进的材料、设计和架构，如多核处理器和并行处理，来提升性能。

软件和硬件的分离：现代计算机更加注重软件和硬件的分离，以提高系统的灵活性和可扩展性。 
```

2. **主存储器是如何工作的？** 按存储单元的地址存放或读取各类信息 

3. **什么是Cache的局部性原理？它包括哪些方面的内容？** 
	1. 局部性是指重复使用已用过的数据，或者使用已用过数据的邻近数据此时访问效率非常高。
	2. 包括时间局部性和空间局部性。 

4. **Cache的运用为什么可以加快系统整体性能？**
	1. 当CPU需要访问内存时，会先检查Cache中是否有所需数据。 如果有，则直接从Cache中读取，由于局部性原理，从Cahe中访问速度快，避免了访问速度较慢的主内存，从而提高了系统性能。




